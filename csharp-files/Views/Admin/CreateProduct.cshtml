@{
    ViewData["Title"] = "Tạo sản phẩm mới";
    var categories = ViewBag.Categories as List<YameApi.Models.Category>;
}

<div class="admin-form">
    <div class="page-header">
        <h1>Tạo sản phẩm mới</h1>
        <a href="@Url.Action("Products", "Admin")" class="btn-back">← Quay lại</a>
    </div>

    <form method="post" class="product-form">
        <div class="form-grid">
            <div class="form-group">
                <label for="title">Tên sản phẩm *</label>
                <input type="text" id="title" name="Title" required class="form-control">
            </div>

            <div class="form-group">
                <label for="slug">Slug *</label>
                <input type="text" id="slug" name="Slug" required class="form-control">
            </div>

            <div class="form-group">
                <label for="price">Giá *</label>
                <input type="number" id="price" name="Price" required step="1000" class="form-control">
            </div>

            <div class="form-group">
                <label for="salePrice">Giá khuyến mãi</label>
                <input type="number" id="salePrice" name="SalePrice" step="1000" class="form-control">
            </div>

            <div class="form-group">
                <label for="categoryId">Danh mục *</label>
                <select id="categoryId" name="CategoryId" required class="form-control">
                    <option value="">Chọn danh mục</option>
                    @if (categories != null)
                    {
                        foreach (var cat in categories)
                        {
                            <option value="@cat.CategoryId">@cat.Name</option>
                        }
                    }
                </select>
            </div>

            <div class="form-group">
                <label>
                    <input type="checkbox" name="Availability" checked>
                    Còn hàng
                </label>
            </div>

            <div class="form-group full-width">
                <label for="shortDescription">Mô tả ngắn</label>
                <textarea id="shortDescription" name="ShortDescription" rows="3" class="form-control"></textarea>
            </div>

            <div class="form-group full-width">
                <label for="description">Mô tả chi tiết</label>
                <textarea id="description" name="Description" rows="6" class="form-control"></textarea>
            </div>

            <div class="form-group">
                <label for="material">Chất liệu</label>
                <input type="text" id="material" name="Material" class="form-control">
            </div>

            <div class="form-group">
                <label for="madeIn">Xuất xứ</label>
                <input type="text" id="madeIn" name="MadeIn" class="form-control">
            </div>

            <div class="form-group full-width">
                <label for="images">URL hình ảnh (mỗi dòng một URL)</label>
                <textarea id="images" name="ImagesText" rows="4" class="form-control" placeholder="/wwwroot/images/product-1.jpg"></textarea>
            </div>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn-submit">Tạo sản phẩm</button>
            <a href="@Url.Action("Products", "Admin")" class="btn-cancel">Hủy</a>
        </div>
    </form>
</div>

<script>
// Auto-generate slug from title
document.getElementById('title').addEventListener('input', function(e) {
    const title = e.target.value;
    const slug = title
        .toLowerCase()
        .normalize('NFD')
        .replace(/[\u0300-\u036f]/g, '')
        .replace(/đ/g, 'd')
        .replace(/[^a-z0-9]+/g, '-')
        .replace(/^-+|-+$/g, '');
    document.getElementById('slug').value = slug;
});
</script>

<style>
.admin-form {
    max-width: 1000px;
    margin: 0 auto;
    padding: 30px 20px;
}

.page-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 30px;
}

.page-header h1 {
    font-size: 28px;
    font-weight: 700;
    color: #1a1a1a;
}

.btn-back {
    padding: 10px 20px;
    background: #f5f5f5;
    color: #1a1a1a;
    text-decoration: none;
    border-radius: 8px;
    font-weight: 600;
    transition: all 0.3s ease;
}

.btn-back:hover {
    background: #e5e5e5;
}

.product-form {
    background: white;
    padding: 40px;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
}

.form-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 24px;
}

.form-group.full-width {
    grid-column: 1 / -1;
}

.form-group label {
    display: block;
    margin-bottom: 8px;
    font-weight: 600;
    color: #1a1a1a;
}

.form-control {
    width: 100%;
    padding: 12px;
    border: 1px solid #e5e5e5;
    border-radius: 8px;
    font-size: 14px;
    transition: all 0.3s ease;
}

.form-control:focus {
    outline: none;
    border-color: #1a1a1a;
}

textarea.form-control {
    resize: vertical;
    font-family: inherit;
}

.form-actions {
    display: flex;
    gap: 12px;
    margin-top: 30px;
    padding-top: 30px;
    border-top: 1px solid #e5e5e5;
}

.btn-submit {
    padding: 12px 32px;
    background: #1a1a1a;
    color: white;
    border: none;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
}

.btn-submit:hover {
    background: #333;
}

.btn-cancel {
    padding: 12px 32px;
    background: #f5f5f5;
    color: #1a1a1a;
    text-decoration: none;
    border-radius: 8px;
    font-weight: 600;
    transition: all 0.3s ease;
}

.btn-cancel:hover {
    background: #e5e5e5;
}
</style>
